<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ê¸°ê´´í•œ ìº¡ì± ì™€ ì´ìƒí•œ ë‚˜ë¼</title>
<link href="https://cdn.jsdelivr.net/npm/galmuri@latest/dist/galmuri.css" rel="stylesheet">
<script src="https://cdn.ckeditor.com/4.22.1/standard/ckeditor.js"></script>

<style>
    /* === ğŸ©¸ ë¬´ëŒ€ ê¸°ë³¸ ì„¤ì • === */
    body { margin: 0; padding: 0; overflow: hidden; background: #000; font-family: 'Galmuri9', sans-serif; user-select: none; }
    #stage { position: relative; width: 100vw; height: 100vh; overflow: hidden; }

    /* === ğŸ’¥ ê¸€ë¦¬ì¹˜ íš¨ê³¼ (ì˜¤ë‹µ í´ë¦­ ì‹œ) === */
    .glitch-active { animation: glitch-anim 0.2s infinite; filter: invert(1) hue-rotate(90deg); }
    @keyframes glitch-anim {
        0% { transform: translate(0); }
        20% { transform: translate(-10px, 5px); }
        40% { transform: translate(10px, -5px); }
        60% { transform: translate(-5px, 10px); }
        80% { transform: translate(5px, -10px); }
        100% { transform: translate(0); }
    }

    /* === ğŸ­ ì œ1ë§‰: ì¸íŠ¸ë¡œ (íŒŒìŠ¤í…” ìº¡ì± ) === */
    #scene-intro { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #e8d0d8; display: flex; justify-content: center; align-items: center; z-index: 100; flex-direction: column; transition: opacity 1s; }
    
    .captcha-box { background: #dcb3c4; padding: 20px; border-radius: 10px; border: 4px solid #c895a9; box-shadow: 10px 10px 0 rgba(0,0,0,0.1); text-align: center; }
    .captcha-grid { display: grid; grid-template-columns: repeat(3, 80px); gap: 15px; margin: 20px 0; justify-content: center; }
    
    /* CSS ì•„íŠ¸: ì´ëª¨ì§€ ë°°ì œ, ìˆœìˆ˜ ì½”ë“œë¡œ ê·¸ë¦° ë„í˜•ë“¤ */
    .shape-btn { width: 80px; height: 80px; background: #f4e1e8; border: 2px solid #b77b90; cursor: pointer; display: flex; justify-content: center; align-items: center; transition: 0.2s; }
    .shape-btn:hover { background: #fff; transform: scale(1.05); }
    
    /* ê°€ì§œ ë„í˜•ë“¤ (ìœ ê¸°ì ì¸ ë¸”ë¡­ í˜•íƒœ) */
    .blob1 { width: 50px; height: 50px; background: #d8b4e2; border-radius: 40% 60% 70% 30% / 40% 50% 60% 50%; }
    .blob2 { width: 50px; height: 50px; background: #a8d8ea; border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%; }
    .blob3 { width: 50px; height: 50px; background: #f3dfa2; border-radius: 50% 50% 20% 80% / 25% 80% 20% 75%; }
    
    /* ì§„ì‹¤ì˜ ì„¸ëª¨ (CSS ì‚¼ê°í˜•) */
    .triangle-true { width: 0; height: 0; border-left: 25px solid transparent; border-right: 25px solid transparent; border-bottom: 45px solid #82b5a5; }

    .captcha-text { color: #6b4c5a; font-size: 18px; font-weight: bold; margin-top: 15px; letter-spacing: -1px; }

    /* === ğŸª ë¶‰ì€ ë²¨ë²³ ì»¤íŠ¼ === */
    .curtain { position: absolute; top: 0; width: 50%; height: 100%; background: linear-gradient(to right, #4a0000, #800000, #4a0000); z-index: 90; transition: transform 2s cubic-bezier(0.65, 0, 0.35, 1); box-shadow: inset 0 0 50px rgba(0,0,0,0.8); }
    .curtain::after { content: ''; position: absolute; bottom: 0; width: 100%; height: 50px; background: radial-gradient(circle, #ffcc00 20%, transparent 20%); background-size: 30px 30px; background-position: bottom; }
    #curtain-left { left: 0; transform-origin: left; border-right: 5px solid #ffcc00; }
    #curtain-right { right: 0; transform-origin: right; border-left: 5px solid #ffcc00; }
    
    /* ì»¤íŠ¼ ê°œë°© í´ë˜ìŠ¤ */
    .open-left { transform: scaleX(0); }
    .open-right { transform: scaleX(0); }

    /* === ğŸ‡ ì œ2ë§‰: ë¡œë¹„ (ì´ìƒí•œ ë‚˜ë¼ì˜ ì•¨ë¦¬ìŠ¤) === */
    #scene-lobby { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle at center, #2c3e50, #000); display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 10; transition: 1s; opacity: 1; }
    
    .lobby-title { color: #fff; font-size: 30px; text-shadow: 2px 2px 10px #000; margin-bottom: 50px; letter-spacing: 5px; }

    /* ê¸°ë¬˜í•œ ë²„íŠ¼ë“¤ (CSS ë‘¥ë‘¥ íš¨ê³¼) */
    .floating-items { display: flex; gap: 50px; align-items: flex-end; }
    .item-wrapper { display: flex; flex-direction: column; align-items: center; cursor: pointer; animation: float 3s ease-in-out infinite; }
    .item-wrapper:nth-child(2) { animation-delay: 0.5s; }
    .item-wrapper:nth-child(3) { animation-delay: 1s; }
    @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }

    /* CSS ì•„íŠ¸: íšŒì¤‘ì‹œê³„ (ì¼ê¸°ì¥) */
    .css-watch { width: 80px; height: 80px; border-radius: 50%; border: 8px solid #ffd700; background: #fff; position: relative; box-shadow: 0 10px 20px rgba(0,0,0,0.5); display: flex; justify-content: center; align-items: center; }
    .css-watch::before { content: ''; position: absolute; top: -15px; width: 20px; height: 10px; border: 4px solid #ffd700; border-radius: 10px 10px 0 0; }
    .watch-hand { width: 4px; height: 30px; background: #000; position: absolute; bottom: 50%; transform-origin: bottom; transform: rotate(45deg); border-radius: 2px; }
    
    /* CSS ì•„íŠ¸: ì²´ì…” ê³ ì–‘ì´ ë¯¸ì†Œ (í”„ë¡œí•„) */
    .css-smile { width: 100px; height: 50px; border-bottom: 12px solid #a020f0; border-radius: 0 0 50px 50px; box-shadow: 0 10px 20px rgba(160,32,240,0.4); position: relative; }
    .css-smile::after { content: ''; position: absolute; top: -20px; left: 15px; width: 70px; height: 20px; border-bottom: 4px dashed #fff; border-radius: 0 0 50px 50px; }

    /* CSS ì•„íŠ¸: íŠ¸ëŸ¼í”„ ì¹´ë“œ (ê³µì§€ì‚¬í•­) */
    .css-card { width: 60px; height: 90px; background: #fff; border-radius: 5px; border: 2px solid #000; position: relative; display: flex; justify-content: center; align-items: center; box-shadow: 0 10px 20px rgba(0,0,0,0.5); }
    /* ìˆœìˆ˜ CSS í•˜íŠ¸ ëª¨ì–‘ */
    .css-heart { width: 20px; height: 20px; background: #f00; transform: rotate(-45deg); position: relative; margin-top: 10px; }
    .css-heart::before, .css-heart::after { content: ''; width: 20px; height: 20px; background: #f00; border-radius: 50%; position: absolute; }
    .css-heart::before { top: -10px; left: 0; }
    .css-heart::after { top: 0; left: 10px; }

    .item-text { color: #fff; margin-top: 15px; font-size: 14px; text-shadow: 1px 1px 0 #000; font-weight: bold; }

    /* í† ë¼êµ´ (ë…¸ë€ì¥íŒìœ¼ë¡œ ê°€ëŠ” ë¬¸) */
    .rabbit-hole { margin-top: 60px; width: 120px; height: 40px; border-radius: 50%; background: radial-gradient(ellipse at center, #000 0%, #111 50%, #333 100%); box-shadow: 0 0 30px #000; cursor: pointer; display: flex; justify-content: center; align-items: center; color: rgba(255,255,255,0.2); font-size: 10px; transition: 0.5s; }
    .rabbit-hole:hover { transform: scale(1.2) rotate(10deg); color: #fff; background: radial-gradient(ellipse at center, #000 0%, #4a0000 100%); }

    /* === ğŸš¬ ì œ3ë§‰: ë…¸ë€ì¥íŒ ë£¸ (ìˆ¨ê²¨ì§„ ê³µê°„) === */
    #scene-room { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(to bottom, #4a2e2e 0%, #2e1d1d 50%, #cda043 50%, #9e7a2f 100%); z-index: 5; opacity: 0; transform: scale(1.5); transition: 1.5s ease-in-out; pointer-events: none; }
    .room-active { opacity: 1 !important; transform: scale(1) !important; pointer-events: auto !important; z-index: 20 !important; }
    
    /* ìˆœìˆ˜ CSSë¡œ ê·¸ë¦° ë°©ì˜ ì†Œí’ˆë“¤ */
    .room-window { position: absolute; top: 15%; right: 15%; width: 200px; height: 250px; border: 15px solid #3d2314; background: #7a5c5c; box-shadow: inset 0 0 50px #000; }
    .room-bed { position: absolute; bottom: 5%; left: 10%; width: 300px; height: 150px; background: #b56c83; border: 5px solid #6b3e4e; border-radius: 20px; transform: perspective(500px) rotateX(20deg); }
    .room-char { position: absolute; bottom: 30%; left: 50%; width: 60px; height: 180px; background: #111; border-radius: 30px 30px 5px 5px; box-shadow: 10px 10px 0 rgba(0,0,0,0.5); }
    .room-msg { position: absolute; top: 20%; left: 50%; color: #fff; font-size: 20px; text-shadow: 2px 2px 0 #000; }

    /* === ğŸ‘ ê´‘ê¸°ì˜ ê´€ê°ë“¤ (í´ë¦­ ì´ë²¤íŠ¸) === */
    #audience { position: absolute; bottom: -100px; left: 0; width: 100%; height: 100px; z-index: 9999; display: flex; justify-content: space-around; align-items: flex-end; transition: transform 0.2s; pointer-events: none; }
    .audience-head { width: 40px; height: 60px; background: #111; border-radius: 50px 50px 0 0; position: relative; }
    .audience-hand { width: 15px; height: 15px; background: #333; border-radius: 50%; position: absolute; top: -10px; left: -10px; animation: clap 0.1s infinite alternate; }
    .audience-hand.right { left: auto; right: -10px; animation-delay: 0.05s; }
    @keyframes clap { 0% { transform: translateY(0) scale(1); } 100% { transform: translateY(-10px) scale(1.2); background: #555; } }
    
    .clapping-active { transform: translateY(-100px); }

    /* === ğŸ“ ê¸°ë¬˜í•œ íŒì—…ì°½ (ë¡œë¹„ìš©) === */
    .alice-popup { position: absolute; display: none; background: #fdf5e6; border: 8px solid #8b4513; border-radius: 5px; box-shadow: 0 20px 50px rgba(0,0,0,0.8); width: 600px; z-index: 2000; top: 10%; left: 50%; transform: translateX(-50%); outline: 2px solid #000; outline-offset: -10px; }
    .alice-header { background: #8b4513; color: #fdf5e6; padding: 10px; text-align: center; font-weight: bold; cursor: grab; letter-spacing: 2px; }
    .alice-body { padding: 20px; max-height: 60vh; overflow-y: auto; color: #333; }
    .btn-close { position: absolute; top: 8px; right: 15px; color: #fdf5e6; cursor: pointer; font-size: 16px; }
    .btn-close:hover { color: #f00; }

</style>
</head>
<body>

<div id="stage">

    <div id="audience">
        </div>

    <div id="scene-intro">
        <div class="captcha-box">
            <div style="font-size: 12px; color: #888; text-align: left;">ë³´ì•ˆ í™•ì¸.</div>
            <div class="captcha-grid">
                <div class="shape-btn" onclick="wrongClick()"><div class="blob1"></div></div>
                <div class="shape-btn" onclick="wrongClick()"><div class="blob2"></div></div>
                <div class="shape-btn" onclick="wrongClick()"><div class="blob3"></div></div>
                <div class="shape-btn" onclick="wrongClick()"><div class="blob2" style="border-radius: 50%;"></div></div>
                <div class="shape-btn" onclick="openCurtain()"><div class="triangle-true"></div></div>
                <div class="shape-btn" onclick="wrongClick()"><div class="blob1" style="transform: rotate(45deg);"></div></div>
            </div>
            <div class="captcha-text">"ì„¸ëª¨"ë¥¼ ì„ íƒí•˜ì—¬, ë¡œë´‡ì´ ì•„ë‹˜ì„ ì¦ëª…í•˜ì‹­ì‹œì˜¤.</div>
        </div>
    </div>

    <div id="curtain-left" class="curtain"></div>
    <div id="curtain-right" class="curtain"></div>

    <div id="scene-lobby">
        <div class="lobby-title">THE THEATER OF ABSURDITY</div>
        
        <div class="floating-items">
            <div class="item-wrapper" onclick="openPopup('write-window')">
                <div class="css-watch"><div class="watch-hand"></div></div>
                <div class="item-text">ì¼ê¸°ì¥ (Write)</div>
            </div>
            <div class="item-wrapper" onclick="alert('í”„ë¡œí•„... ì•„ì§ ë¹„ì–´ìˆë‹¤...')">
                <div class="css-smile"></div>
                <div class="item-text">í”„ë¡œí•„ (Profile)</div>
            </div>
            <div class="item-wrapper" onclick="alert('íŠ¸ëŸ¼í”„ ë³‘ì •ì´ ê¸¸ì„ ë§‰ëŠ”ë‹¤...')">
                <div class="css-card"><div class="css-heart"></div></div>
                <div class="item-text">ê³µì§€ (Notice)</div>
            </div>
        </div>

        <div class="rabbit-hole" onclick="fallToRoom()">
            Deep Hole...
        </div>
    </div>

    <div id="scene-room">
        <div class="room-window"></div>
        <div class="room-bed" onclick="alert('ë¨¼ì§€ê°€ í’€í’€ ë‚ ë¦°ë‹¤...')"></div>
        <div class="room-char" onclick="alert('AI ì‹œë©”ì§€: [System Error] ê¸°ì–µì„ ìƒì—ˆìŠµë‹ˆë‹¤.')"></div>
        <div class="room-msg">SYSTEM: ë…¸ë€ì¥íŒ êµ¬ì—­ì— ì§„ì…í–ˆìŠµë‹ˆë‹¤.</div>
    </div>

</div>

<div id="write-window" class="alice-popup">
    <div class="alice-header">
        ë§Œë…„í•„ê³¼ ì–‘í”¼ì§€
        <div class="btn-close" onclick="closePopup('write-window')">âœ–</div>
    </div>
    <div class="alice-body">
        <input type="text" placeholder="ì œëª©ì„ ì ì–´ë¼..." style="width: 100%; padding: 10px; margin-bottom: 10px; background: transparent; border: 1px solid #8b4513; font-family: 'Galmuri9'; outline: none; box-sizing: border-box;">
        
        <textarea id="post-content"></textarea>
        
        <div style="text-align:right; margin-top:20px;">
            <button style="background: #8b4513; color: #fff; border: none; padding: 10px 20px; font-family: 'Galmuri9'; cursor: pointer; box-shadow: 2px 2px 0 #000;">ê¸°ë¡í•˜ê¸°</button>
        </div>
    </div>
</div>

<script>
    // ğŸ‘ ê´€ê° ìƒì„±ê¸°
    const audienceDiv = document.getElementById('audience');
    for(let i=0; i<15; i++) {
        audienceDiv.innerHTML += `<div class="audience-head"><div class="audience-hand"></div><div class="audience-hand right"></div></div>`;
    }

    // ğŸ‘ í´ë¦­ ì‹œ ë°•ìˆ˜ ì• ë‹ˆë©”ì´ì…˜ (ì–´ë””ë“  í´ë¦­í•˜ë©´ ë°˜ì‘)
    document.addEventListener('click', () => {
        audienceDiv.classList.add('clapping-active');
        setTimeout(() => { audienceDiv.classList.remove('clapping-active'); }, 800);
    });

    // ğŸ’¥ ê°€ì§œ ìº¡ì±  í´ë¦­ ì‹œ ê¸€ë¦¬ì¹˜ íš¨ê³¼
    function wrongClick() {
        const intro = document.getElementById('scene-intro');
        intro.classList.add('glitch-active');
        setTimeout(() => { intro.classList.remove('glitch-active'); }, 500);
    }

    // ğŸ­ ì •ë‹µ(ì„¸ëª¨) í´ë¦­ ì‹œ ì»¤íŠ¼ ê°œë°©
    function openCurtain() {
        // ìº¡ì±  íŒì—… ë¶€ìˆ˜ê¸°
        document.querySelector('.captcha-box').style.transform = 'scale(0.5) rotate(20deg)';
        document.querySelector('.captcha-box').style.opacity = '0';
        
        setTimeout(() => {
            document.getElementById('scene-intro').style.display = 'none';
            // ì»¤íŠ¼ ì—´ê¸°
            document.getElementById('curtain-left').classList.add('open-left');
            document.getElementById('curtain-right').classList.add('open-right');
        }, 500);
    }

    // ğŸ•³ï¸ í† ë¼êµ´ í´ë¦­ ì‹œ ë…¸ë€ì¥íŒìœ¼ë¡œ í™”ë©´ ì „í™˜
    function fallToRoom() {
        // ë¡œë¹„ ë¹™ê¸€ë¹™ê¸€ ëŒë©° ì‚¬ë¼ì§
        const lobby = document.getElementById('scene-lobby');
        lobby.style.transform = 'scale(0.1) rotate(360deg)';
        lobby.style.opacity = '0';
        
        // ë…¸ë€ì¥íŒ ë£¸ ì¤Œì¸ë˜ë©° ë“±ì¥
        setTimeout(() => {
            document.getElementById('scene-room').classList.add('room-active');
        }, 800);
    }

    // íŒì—… ì œì–´
    function openPopup(id) { 
        document.getElementById(id).style.display = 'block'; 
        // CKEditor í’€ ê¸°ëŠ¥ í™œì„±í™” (ê¸€ê¼´, ìƒ‰ìƒ, ë™ì˜ìƒ ë“± ëª¨ë“  í”ŒëŸ¬ê·¸ì¸ ì¥ì°©)
        if(!CKEDITOR.instances['post-content']) {
            CKEDITOR.replace('post-content', { 
                height: 250, 
                language: 'ko',
                // í’€ íŒ¨í‚¤ì§€ íˆ´ë°” ì„¸íŒ…
                toolbar: [
                    { name: 'document', items: [ 'Source' ] },
                    { name: 'styles', items: [ 'Font', 'FontSize', 'Format', 'TextColor', 'BGColor' ] },
                    { name: 'basicstyles', items: [ 'Bold', 'Italic', 'Underline', 'Strike' ] },
                    { name: 'paragraph', items: [ 'NumberedList', 'BulletedList', 'Blockquote', 'JustifyLeft', 'JustifyCenter', 'JustifyRight' ] },
                    { name: 'insert', items: [ 'Image', 'Flash', 'Table', 'HorizontalRule', 'SpecialChar' ] },
                    { name: 'links', items: [ 'Link', 'Unlink' ] }
                ]
            });
        }
    }
    function closePopup(id) { document.getElementById(id).style.display = 'none'; }

    // íŒì—… ë“œë˜ê·¸ ë§ˆìˆ 
    function makeDraggable(winId) { 
        const win = document.getElementById(winId); const dragArea = win.querySelector('.alice-header'); if(!dragArea) return;
        let p1=0, p2=0, p3=0, p4=0; 
        dragArea.onmousedown = (e) => { e.preventDefault(); p3=e.clientX; p4=e.clientY; document.onmouseup = () => { document.onmouseup=null; document.onmousemove=null; }; document.onmousemove = (e) => { e.preventDefault(); p1=p3-e.clientX; p2=p4-e.clientY; p3=e.clientX; p4=e.clientY; win.style.top=(win.offsetTop-p2)+"px"; win.style.left=(win.offsetLeft-p1)+"px"; }; }; 
    }
    makeDraggable('write-window');

</script>
</body>
</html>
